<!DOCTYPE html>
<html lang="en">

<head>
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Home</title>
</head>

<body>
<app-navbar></app-navbar>
<!--  Add top background color as gray -->
<div class="container-fluid" style="background-color: hsl(0, 2%, 47%);">
    <div class="row">
        <div class="col-12">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <br>
                        <h1 class="text-center">Placeholder text</h1>
                        <!-- Center image -->
                        <div class="text-center">
                            <img src=https://via.placeholder.com/800x400>
                        </div>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add 5 buttons -->
<div class="container-fluid" style="margin-top: -25px;">
    <div class="row">
        <div class="col-12">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="row">
                            <div class="col-2">
                            </div>
                            <div class="col-2 text-center">
                                <button aria-pressed="true" class="btn btn-dark btn-lg btn-block active" id="netflix"
                                        role="button"
                                        style="width:200px" type="submit">Netflix
                                </button>
                            </div>
                            <div class="col-2 text-center">
                                <button class="btn btn-dark btn-lg btn-block" id="hulu"
                                        style="width:200px" type="submit">Hulu
                                </button>
                            </div>
                            <div class="col-2 text-center">
                                <button class="btn btn-dark btn-lg btn-block" id="primevid"
                                        style="width:200px" type="submit">Prime Video
                                </button>
                            </div>
                            <div class="col-2 text-center">
                                <button class="btn btn-dark btn-lg btn-block" id="disney"
                                        style="width:200px" type="submit">Disney+
                                </button>
                            </div>
                            <div class="col-2 text-center">
                            </div>
                        </div>
                        <br>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- create a grid of 5 colums and 3 rows with thumbnails of movies and description-->
    <div class="container-fluid" id="movielist">
        <div class="row">

            <div class="col-2">
                <!-- <img src="https://via.placeholder.com/150x200"> -->
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <!-- <img src="https://via.placeholder.com/150x200"> -->
            </div>
        </div>
        <div class="row">
            <div class="col-2">
                <!-- <img src="https://via.placeholder.com/150x200"> -->
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <!-- <img src="https://via.placeholder.com/150x200"> -->
            </div>
        </div>
        <div class="row">
            <div class="col-2">
                <!-- <img src="https://via.placeholder.com/150x200"> -->
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <img src="https://via.placeholder.com/150x200">
                <p>placeholder text</p>
            </div>
            <div class="col-2 text-center">
                <!-- <img src="https://via.placeholder.com/150x200"> -->
            </div>
        </div>
    </div>
</div>


</body>
<script src="navbar.js"></script>
<script src="navbar-script.js"></script>
<script src="api.js"></script>
<script>
    // select all buttons
    const buttons = document.querySelectorAll('button');
    // const buttons = document.querySelector('button');
    //console.log(buttons)
    let pageNumber = 1;

    // write for loop
    for (let i = 0; i < buttons.length; i++) {
        // add event listener to each button
        buttons[i].addEventListener('click', function () {
            console.log(buttons[i].id);
            // make a request to the API

            let requestBody = "query=" + `platform:${buttons[i].id}`;
            let data = {};
            fetch('http://localhost:3000/media/search', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: requestBody,
            })
                .then(response => response.json())
                .then(_data => {
                    data = _data;
                    console.log('Success:', data);

                    // parse the data
                    const {media} = data;

                    // replace the content of the movielist with netflix movies
                    let htmlString = '<div class="container-fluid" id="movielist"><div class="row"><div class="col-2"></div>'
                    for (let j = 0; j < 24; j++) {
                        htmlString += `<div class="col-2 text-center"><img style="width: 200px; height: 300px" src=${media[j].imageURL}><p>${media[j].title}</p></div>`
                        if ([3, 7, 11, 15, 19, 23].includes(j)) {
                            htmlString += '<div class="col-2"></div></div><div class="row"><div class="col-2"></div>'
                        }
                    }
                    htmlString += '<div class="col-2"></div></div></div>'
                    // add pagination

                    document.getElementById('movielist').innerHTML = htmlString;

                })
                .catch((error) => {
                    console.error('Error:', error);
                });


        });
    }

</script>

</html>